!function(factory){"function"==typeof define&&define.amd?define(["shoestring"],factory):"object"==typeof module&&module.exports?module.exports=factory():factory()}(function(){var win="undefined"!=typeof window?window:this,doc=win.document;function shoestring(prim,sec){var sel,pType=typeof prim;if(!prim)return new Shoestring([]);if(prim.call)return shoestring.ready(prim);if(prim.constructor===Shoestring&&!sec)return prim;if("string"!==pType||0!==prim.indexOf("<"))return"string"===pType?sec?shoestring(sec).find(prim):(sel=doc.querySelectorAll(prim),new Shoestring(sel,prim)):"[object Array]"===Object.prototype.toString.call(pType)||win.NodeList&&prim instanceof win.NodeList?new Shoestring(prim,prim):prim.constructor===Array?new Shoestring(prim,prim):new Shoestring([prim],prim);var dfrag=doc.createElement("div");return dfrag.innerHTML=prim,shoestring(dfrag).children().each(function(){dfrag.removeChild(this)})}var Shoestring=function(ret,prim){this.length=0,this.selector=prim,shoestring.merge(this,ret)};Shoestring.prototype.reverse=[].reverse,shoestring.fn=Shoestring.prototype,shoestring.Shoestring=Shoestring,shoestring.extend=function(first,second){for(var i in second)second.hasOwnProperty(i)&&(first[i]=second[i]);return first},shoestring.merge=function(first,second){var len,j,i;for(len=+second.length,j=0,i=first.length;j<len;j++)first[i++]=second[j];return first.length=i,first},(win.shoestring=shoestring).fn.each=function(callback){return shoestring.each(this,callback)},shoestring.each=function(collection,callback){for(var i=0,il=collection.length;i<il&&!1!==callback.call(collection[i],i,collection[i]);i++);return collection},shoestring.inArray=function(needle,haystack){for(var isin=-1,i=0,il=haystack.length;i<il;i++)haystack.hasOwnProperty(i)&&haystack[i]===needle&&(isin=i);return isin},shoestring.ready=function(fn){return ready&&fn?fn.call(doc):fn?readyQueue.push(fn):runReady(),[doc]};var cssExceptions,ready=!(shoestring.fn.ready=function(fn){return shoestring.ready(fn),this}),readyQueue=[],runReady=function(){if(!ready){for(;readyQueue.length;)readyQueue.shift().call(doc);ready=!0}};function _checkElements(needles,haystack){var ret=!1;return needles.each(function(){for(var j=0;j<haystack.length;)this===haystack[j]&&(ret=!0),j++}),ret}(doc.attachEvent?"complete"===doc.readyState:"loading"!==doc.readyState)?runReady():(doc.addEventListener("DOMContentLoaded",runReady,!1),doc.addEventListener("readystatechange",runReady,!1),win.addEventListener("load",runReady,!1)),shoestring.fn.is=function(selector){var parents,ret=!1,self=this;return"string"!=typeof selector?_checkElements(this,selector.length&&selector[0]?selector:[selector]):((parents=this.parent()).length||(parents=shoestring(doc)),parents.each(function(i,e){var children;children=e.querySelectorAll(selector),ret=_checkElements(self,children)}),ret)},shoestring.fn.data=function(name,value){return void 0===name?this[0]?this[0].shoestringData||{}:void 0:void 0!==value?this.each(function(){this.shoestringData||(this.shoestringData={}),this.shoestringData[name]=value}):this[0]&&this[0].shoestringData?this[0].shoestringData[name]:void 0},shoestring.fn.removeData=function(name){return this.each(function(){void 0!==name&&this.shoestringData?(this.shoestringData[name]=void 0,delete this.shoestringData[name]):this[0].shoestringData={}})},shoestring.fn.addClass=function(className){var classes=className.replace(/^\s+|\s+$/g,"").split(" ");return this.each(function(){for(var i=0,il=classes.length;i<il;i++)void 0===this.className||""!==this.className&&this.className.match(new RegExp("(^|\\s)"+classes[i]+"($|\\s)"))||(this.className+=" "+classes[i])})},shoestring.fn.add=function(selector){var ret=[];return this.each(function(){ret.push(this)}),shoestring(selector).each(function(){ret.push(this)}),shoestring(ret)},shoestring.fn.append=function(fragment){return"string"!=typeof fragment&&void 0===fragment.nodeType||(fragment=shoestring(fragment)),this.each(function(i){for(var j=0,jl=fragment.length;j<jl;j++)this.appendChild(0<i?fragment[j].cloneNode(!0):fragment[j])})},shoestring.fn.appendTo=function(selector){return this.each(function(){shoestring(selector).append(this)})},shoestring.fn.attr=function(name,value){var nameStr="string"==typeof name;return void 0===value&&nameStr?this[0]?this[0].getAttribute(name):void 0:this.each(function(){if(nameStr)this.setAttribute(name,value);else for(var i in name)name.hasOwnProperty(i)&&this.setAttribute(i,name[i])})},shoestring.fn.before=function(fragment){return"string"!=typeof fragment&&void 0===fragment.nodeType||(fragment=shoestring(fragment)),this.each(function(i){for(var j=0,jl=fragment.length;j<jl;j++)this.parentNode.insertBefore(0<i?fragment[j].cloneNode(!0):fragment[j],this)})},shoestring.fn.children=function(){var childs,j,ret=[];return this.each(function(){for(childs=this.children,j=-1;j++<childs.length-1;)-1===shoestring.inArray(childs[j],ret)&&ret.push(childs[j])}),shoestring(ret)},shoestring.fn.closest=function(selector){var ret=[];return selector&&this.each(function(){var element;if(shoestring(element=this).is(selector))ret.push(this);else for(;element.parentElement;){if(shoestring(element.parentElement).is(selector)){ret.push(element.parentElement);break}element=element.parentElement}}),shoestring(ret)},shoestring.cssExceptions={float:["cssFloat"]},function(){var cssExceptions=shoestring.cssExceptions;function _getStyle(element,property){return win.getComputedStyle(element,null).getPropertyValue(property)}var vendorPrefixes=["","-webkit-","-ms-","-moz-","-o-","-khtml-"];shoestring._getStyle=function(element,property){var convert,value,j,k;if(cssExceptions[property])for(j=0,k=cssExceptions[property].length;j<k;j++)if(value=_getStyle(element,cssExceptions[property][j]))return value;for(j=0,k=vendorPrefixes.length;j<k;j++)if(value=_getStyle(element,convert=(vendorPrefixes[j]+property).replace(/\-([A-Za-z])/g,function(match,character){return character.toUpperCase()})),convert!==property&&(value=value||_getStyle(element,property)),vendorPrefixes[j]&&(value=value||_getStyle(element,vendorPrefixes[j]+property)),value)return value}}(),cssExceptions=shoestring.cssExceptions,shoestring._setStyle=function(element,property,value){var convertedProperty=property.replace(/\-([A-Za-z])/g,function(match,character){return character.toUpperCase()});if(element.style[property]=value,convertedProperty!==property&&(element.style[convertedProperty]=value),cssExceptions[property])for(var j=0,k=cssExceptions[property].length;j<k;j++)element.style[cssExceptions[property][j]]=value},shoestring.fn.css=function(property,value){if(this[0])return"object"==typeof property?this.each(function(){for(var key in property)property.hasOwnProperty(key)&&shoestring._setStyle(this,key,property[key])}):void 0!==value?this.each(function(){shoestring._setStyle(this,property,value)}):shoestring._getStyle(this[0],property)},shoestring.fn.eq=function(index){return this[index]?shoestring(this[index]):shoestring([])},shoestring.fn.filter=function(selector){var ret=[];return this.each(function(index){var wsel;if("function"==typeof selector)!1!==selector.call(this,index)&&ret.push(this);else{if(this.parentNode)wsel=shoestring(selector,this.parentNode);else{var context=shoestring(doc.createDocumentFragment());context[0].appendChild(this),wsel=shoestring(selector,context)}-1<shoestring.inArray(this,wsel)&&ret.push(this)}}),shoestring(ret)},shoestring.fn.find=function(selector){var finds,ret=[];return this.each(function(){for(var i=0,il=(finds=this.querySelectorAll(selector)).length;i<il;i++)ret=ret.concat(finds[i])}),shoestring(ret)},shoestring.fn.first=function(){return this.eq(0)},shoestring.fn.get=function(index){if(void 0!==index)return this[index];for(var elements=[],i=0;i<this.length;i++)elements.push(this[i]);return elements};shoestring.fn.html=function(html){if(void 0!==html)return function(html){if("string"==typeof html||"number"==typeof html)return this.each(function(){this.innerHTML=""+html});var h="";if(void 0!==html.length)for(var i=0,l=html.length;i<l;i++)h+=html[i].outerHTML;else h=html.outerHTML;return this.each(function(){this.innerHTML=h})}.call(this,html);var pile="";return this.each(function(){pile+=this.innerHTML}),pile},function(){function _getIndex(set,test){var i,result,element;for(i=result=0;i<set.length;i++){if(test(element=set.item?set.item(i):set[i]))return result;1===element.nodeType&&result++}return-1}shoestring.fn.index=function(selector){var self;return self=this,void 0===selector?_getIndex((this[0]&&this[0].parentNode||doc.documentElement).childNodes,function(element){return self[0]===element}):_getIndex(self,function(element){return element===shoestring(selector,element.parentNode)[0]})}}(),shoestring.fn.insertBefore=function(selector){return this.each(function(){shoestring(selector).before(this)})},shoestring.fn.last=function(){return this.eq(this.length-1)},shoestring.fn.next=function(){var result=[];return this.each(function(){var children,item,found;children=shoestring(this.parentNode)[0].childNodes;for(var i=0;i<children.length;i++){if(item=children.item(i),found&&1===item.nodeType){result.push(item);break}item===this&&(found=!0)}}),shoestring(result)},shoestring.fn.not=function(selector){var ret=[];return this.each(function(){var found=shoestring(selector,this.parentNode);-1===shoestring.inArray(this,found)&&ret.push(this)}),shoestring(ret)},shoestring.fn.parent=function(){var parent,ret=[];return this.each(function(){(parent=this===doc.documentElement?doc:this.parentNode)&&11!==parent.nodeType&&ret.push(parent)}),shoestring(ret)},shoestring.fn.prepend=function(fragment){return"string"!=typeof fragment&&void 0===fragment.nodeType||(fragment=shoestring(fragment)),this.each(function(i){for(var j=0,jl=fragment.length;j<jl;j++){var insertEl=0<i?fragment[j].cloneNode(!0):fragment[j];this.firstChild?this.insertBefore(insertEl,this.firstChild):this.appendChild(insertEl)}})},shoestring.fn.prev=function(){var result=[];return this.each(function(){for(var children,item,found,i=(children=shoestring(this.parentNode)[0].childNodes).length-1;0<=i;i--){if(item=children.item(i),found&&1===item.nodeType){result.push(item);break}item===this&&(found=!0)}}),shoestring(result)},shoestring.fn.prevAll=function(){var result=[];return this.each(function(){for(var $previous=shoestring(this).prev();$previous.length;)result.push($previous[0]),$previous=$previous.prev()}),shoestring(result)},shoestring.fn.removeAttr=function(name){return this.each(function(){this.removeAttribute(name)})},shoestring.fn.removeClass=function(cname){var classes=cname.replace(/^\s+|\s+$/g,"").split(" ");return this.each(function(){for(var newClassName,regex,i=0,il=classes.length;i<il;i++)void 0!==this.className&&(regex=new RegExp("(^|\\s)"+classes[i]+"($|\\s)","gmi"),newClassName=this.className.replace(regex," "),this.className=newClassName.replace(/^\s+|\s+$/g,""))})},shoestring.fn.remove=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},shoestring.fn.replaceWith=function(fragment){"string"==typeof fragment&&(fragment=shoestring(fragment));var ret=[];return 1<fragment.length&&(fragment=fragment.reverse()),this.each(function(i){var insertEl,clone=this.cloneNode(!0);if(ret.push(clone),this.parentNode)if(1===fragment.length)insertEl=0<i?fragment[0].cloneNode(!0):fragment[0],this.parentNode.replaceChild(insertEl,this);else{for(var j=0,jl=fragment.length;j<jl;j++)insertEl=0<i?fragment[j].cloneNode(!0):fragment[j],this.parentNode.insertBefore(insertEl,this.nextSibling);this.parentNode.removeChild(this)}}),shoestring(ret)},shoestring.fn.siblings=function(){if(!this.length)return shoestring([]);for(var sibs=[],el=this[0].parentNode.firstChild;1===el.nodeType&&el!==this[0]&&sibs.push(el),el=el.nextSibling;);return shoestring(sibs)};var getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret};function initEventCache(el,evt){el.shoestringData||(el.shoestringData={}),el.shoestringData.events||(el.shoestringData.events={}),el.shoestringData.loop||(el.shoestringData.loop={}),el.shoestringData.events[evt]||(el.shoestringData.events[evt]=[])}function addToEventCache(el,evt,eventInfo){var obj={};obj.isCustomEvent=eventInfo.isCustomEvent,obj.callback=eventInfo.callfunc,obj.originalCallback=eventInfo.originalCallback,obj.namespace=eventInfo.namespace,el.shoestringData.events[evt].push(obj),eventInfo.customEventLoop&&(el.shoestringData.loop[evt]=eventInfo.customEventLoop)}function unbind(evt,namespace,callback){var bound=this.shoestringData.events[evt];if(bound&&bound.length){var j,jl,matched=[];for(j=0,jl=bound.length;j<jl;j++)namespace&&namespace!==bound[j].namespace||void 0!==callback&&callback!==bound[j].originalCallback||(this.removeEventListener(evt,bound[j].callback,!1),matched.push(j));for(j=0,jl=matched.length;j<jl;j++)this.shoestringData.events[evt].splice(j,1)}}function unbindAll(namespace,callback){for(var evtKey in this.shoestringData.events)unbind.call(this,evtKey,namespace,callback)}return shoestring.fn.text=function(){return getText(this)},shoestring.fn.val=function(value){var el;return void 0!==value?this.each(function(){if("SELECT"===this.tagName){var optionSet,option,newIndex,options=this.options,values=[],i=options.length;for(values[0]=value;i--;)((option=options[i]).selected=0<=shoestring.inArray(option.value,values))&&(optionSet=!0,newIndex=i);this.selectedIndex=optionSet?newIndex:-1}else this.value=value}):"SELECT"===(el=this[0]).tagName?el.selectedIndex<0?"":el.options[el.selectedIndex].value:el.value},shoestring._dimension=function(set,name,value){var offsetName;return void 0===value?(offsetName=name.replace(/^[a-z]/,function(letter){return letter.toUpperCase()}),set[0]["offset"+offsetName]):(value="string"==typeof value?value:value+"px",set.each(function(){this.style[name]=value}))},shoestring.fn.width=function(value){return shoestring._dimension(this,"width",value)},shoestring.fn.wrapInner=function(html){return this.each(function(){var inH=this.innerHTML;this.innerHTML="",shoestring(this).append(shoestring(html).html(inH))})},shoestring.fn.bind=function(evt,data,originalCallback){"function"==typeof data&&(originalCallback=data,data=null);var evts=evt.split(" ");function encasedCallback(e,namespace,triggeredElement){var result;if(!e._namespace||e._namespace===namespace){e.data=data,e.namespace=e._namespace;var returnTrue=function(){return!0};e.isDefaultPrevented=function(){return!1};var originalPreventDefault=e.preventDefault;return e.target=triggeredElement||e.target||e.srcElement,e.preventDefault=originalPreventDefault?function(){e.isDefaultPrevented=returnTrue,originalPreventDefault.call(e)}:function(){e.isDefaultPrevented=returnTrue,e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},!1===(result=originalCallback.apply(this,[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),result}}return this.each(function(){for(var domEventCallback,oEl=this,i=0,il=evts.length;i<il;i++){var split=evts[i].split("."),evt=split[0],namespace=0<split.length?split[1]:null;domEventCallback=function(originalEvent){return oEl.ssEventTrigger&&(originalEvent._namespace=oEl.ssEventTrigger._namespace,originalEvent._args=oEl.ssEventTrigger._args,oEl.ssEventTrigger=null),encasedCallback.call(oEl,originalEvent,namespace)},null,initEventCache(this,evt),this.addEventListener(evt,domEventCallback,!1),addToEventCache(this,evt,{callfunc:domEventCallback,isCustomEvent:!1,customEventLoop:null,originalCallback:originalCallback,namespace:namespace})}})},shoestring.fn.on=shoestring.fn.bind,shoestring.fn.unbind=function(event,callback){var evts=event?event.split(" "):[];return this.each(function(){if(this.shoestringData&&this.shoestringData.events)if(evts.length)for(var split,evt,namespace,i=0,il=evts.length;i<il;i++)evt=(split=evts[i].split("."))[0],namespace=0<split.length?split[1]:null,evt?unbind.call(this,evt,namespace,callback):unbindAll.call(this,namespace,callback);else unbindAll.call(this)})},shoestring.fn.off=shoestring.fn.unbind,shoestring.fn.one=function(event,callback){var evts=event.split(" ");return this.each(function(){for(var thisevt,cbs={},$t=shoestring(this),i=0,il=evts.length;i<il;i++)thisevt=evts[i],cbs[thisevt]=function(e){var $t=shoestring(this);for(var j in cbs)$t.unbind(j,cbs[j]);return callback.apply(this,[e].concat(e._args))},$t.bind(thisevt,cbs[thisevt])})},shoestring.fn.triggerHandler=function(event,args){var ret,e=event.split(" ")[0],el=this[0];if(doc.createEvent&&el.shoestringData&&el.shoestringData.events&&el.shoestringData.events[e]){var bindings=el.shoestringData.events[e];for(var i in bindings)bindings.hasOwnProperty(i)&&((event=doc.createEvent("Event")).initEvent(e,!0,!0),(event._args=args).unshift(event),ret=bindings[i].originalCallback.apply(event.target,args))}return ret},shoestring.fn.trigger=function(event,args){var evts=event.split(" ");return this.each(function(){for(var split,evt,namespace,i=0,il=evts.length;i<il;i++){if(evt=(split=evts[i].split("."))[0],namespace=0<split.length?split[1]:null,"click"===evt&&"INPUT"===this.tagName&&"checkbox"===this.type&&this.click)return this.click(),!1;if(doc.createEvent){var event=doc.createEvent("Event");event.initEvent(evt,!0,!0),event._args=args,event._namespace=namespace,this.dispatchEvent(event)}}})},shoestring}),function(root,factory){"function"==typeof define&&define.amd?define(["shoestring"],function(shoestring){return root.Tablesaw=factory(shoestring,root)}):"object"==typeof exports?module.exports=factory(require("shoestring"),root):root.Tablesaw=factory(shoestring,root)}("undefined"!=typeof window?window:this,function($,window){"use strict";var document=window.document,domContentLoadedTriggered=!1;document.addEventListener("DOMContentLoaded",function(){domContentLoadedTriggered=!0});var classes_stackTable,classes_cellLabels,classes_cellContentLabels,data_key,attrs_labelless,attrs_hideempty,Stack,methods,MiniMap,S,Tablesaw={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini,$:$,_init:function(element){Tablesaw.$(element||document).trigger("enhance.tablesaw")},init:function(element){domContentLoadedTriggered?Tablesaw._init(element):"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){Tablesaw._init(element)})}};return $(document).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(Tablesaw.i18n=$.extend(Tablesaw.i18n,TablesawConfig.i18n||{})),Tablesaw.i18n.modes=[Tablesaw.i18n.modeStack,Tablesaw.i18n.modeSwipe,Tablesaw.i18n.modeToggle]}),Tablesaw.mustard&&$(document.documentElement).addClass("tablesaw-enhanced"),function(){var classes_toolbar="tablesaw-bar",events={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},defaultConfig={};Tablesaw.events=events;var Table=function(element){if(!element)throw new Error("Tablesaw requires an element.");this.table=element,this.$table=$(element),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()};Table.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id","tablesaw-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data("tablesaw",this),this.$table.trigger(events.create,[this])},Table.prototype.getConfig=function(pluginSpecificConfig){var configs=$.extend(defaultConfig,pluginSpecificConfig||{});return $.extend(configs,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},Table.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},Table.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!$(this).is("[data-tablesaw-ignorerow]")})},Table.prototype._getRowIndex=function($row){return $row.prevAll().length},Table.prototype._getHeaderRowIndeces=function(){var self=this,indeces=[];return this._getHeaderRows().each(function(){indeces.push(self._getRowIndex($(this)))}),indeces},Table.prototype._getPrimaryHeaderCells=function($row){return($row||this._getPrimaryHeaderRow()).find("th")},Table.prototype._$getCells=function(th){var self=this;return $(th).add(th.cells).filter(function(){var $t=$(this),$row=$t.parent(),hasColspan=$t.is("[colspan]");return!($row.is("["+self.attributes.subrow+"]")||$row.is("["+self.attributes.ignorerow+"]")&&hasColspan)})},Table.prototype._getVisibleColspan=function(){var colspan=0;return this._getPrimaryHeaderCells().each(function(){var $t=$(this);"none"!==$t.css("display")&&(colspan+=parseInt($t.attr("colspan"),10)||1)}),colspan},Table.prototype.getColspanForCell=function($cell){var visibleColspan=this._getVisibleColspan(),visibleSiblingColumns=0;return $cell.closest("tr").data("tablesaw-rowspanned")&&visibleSiblingColumns++,$cell.siblings().each(function(){var $t=$(this),colColspan=parseInt($t.attr("colspan"),10)||1;"none"!==$t.css("display")&&(visibleSiblingColumns+=colColspan)}),visibleColspan-visibleSiblingColumns},Table.prototype.isCellInColumn=function(header,cell){return $(header).add(header.cells).filter(function(){return this===cell}).length},Table.prototype.updateColspanCells=function(cls,header,userAction){var self=this,primaryHeaderRow=self._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var $t=$(this);if("persist"===$t.attr("data-tablesaw-priority")){var $row=$t.closest("tr"),rowspan=parseInt($t.attr("rowspan"),10);1<rowspan&&(($row=$row.next()).data("tablesaw-rowspanned",!0),rowspan--)}}),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return $(this).closest("tr")[0]!==primaryHeaderRow[0]}).each(function(){var $cell=$(this);if(void 0===userAction||self.isCellInColumn(header,this)){var colspan=self.getColspanForCell($cell);cls&&void 0!==userAction&&$cell[0===colspan?"addClass":"removeClass"](cls);var maxColspan=parseInt($cell.attr("data-tablesaw-maxcolspan"),10);maxColspan?maxColspan<colspan&&(colspan=maxColspan):$cell.attr("data-tablesaw-maxcolspan",$cell.attr("colspan")),$cell.attr("colspan",colspan)}})},Table.prototype._findPrimaryHeadersForCell=function(cell){for(var $headerRow=this._getPrimaryHeaderRow(),$headers=this._getPrimaryHeaderCells($headerRow),headerRowIndex=this._getRowIndex($headerRow),results=[],rowNumber=0;rowNumber<this.headerMapping.length;rowNumber++)if(rowNumber!==headerRowIndex)for(var colNumber=0;colNumber<this.headerMapping[rowNumber].length;colNumber++)this.headerMapping[rowNumber][colNumber]===cell&&results.push($headers[colNumber]);return results},Table.prototype.getRows=function(){var self=this;return this.$table.find("tr").filter(function(){return $(this).closest("table").is(self.$table)})},Table.prototype.getBodyRows=function(tbody){return(tbody?$(tbody):this.$tbody).children().filter("tr")},Table.prototype.getHeaderCellIndex=function(cell){for(var lookup=this.headerMapping[0],colIndex=0;colIndex<lookup.length;colIndex++)if(lookup[colIndex]===cell)return colIndex;return-1},Table.prototype._initCells=function(){this.$table.find("[data-tablesaw-maxcolspan]").each(function(){var $t=$(this);$t.attr("colspan",$t.attr("data-tablesaw-maxcolspan"))});var $rows=this.getRows(),columnLookup=[];$rows.each(function(rowNumber){columnLookup[rowNumber]=[]}),$rows.each(function(rowNumber){var coltally=0;$(this).children().each(function(){for(var colspan=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),rowspan=parseInt(this.getAttribute("rowspan"),10);columnLookup[rowNumber][coltally];)coltally++;if(columnLookup[rowNumber][coltally]=this,colspan)for(var k=0;k<colspan-1;k++)coltally++,columnLookup[rowNumber][coltally]=this;if(rowspan)for(var j=1;j<rowspan;j++)columnLookup[rowNumber+j][coltally]=this;coltally++})});for(var headerRowIndeces=this._getHeaderRowIndeces(),colNumber=0;colNumber<columnLookup[0].length;colNumber++)for(var headerIndex=0,k=headerRowIndeces.length;headerIndex<k;headerIndex++){var rowCell,headerCol=columnLookup[headerRowIndeces[headerIndex]][colNumber],rowNumber=headerRowIndeces[headerIndex];for(headerCol.cells||(headerCol.cells=[]);rowNumber<columnLookup.length;)headerCol!==(rowCell=columnLookup[rowNumber][colNumber])&&headerCol.cells.push(rowCell),rowNumber++}this.headerMapping=columnLookup},Table.prototype.refresh=function(){this._initCells(),this.$table.trigger(events.refresh,[this])},Table.prototype._getToolbarAnchor=function(){var $parent=this.$table.parent();return $parent.is(".tablesaw-overflow")?$parent:this.$table},Table.prototype._getToolbar=function($anchor){return $anchor||($anchor=this._getToolbarAnchor()),$anchor.prev().filter("."+classes_toolbar)},Table.prototype.createToolbar=function(){var $anchor=this._getToolbarAnchor(),$toolbar=this._getToolbar($anchor);$toolbar.length||($toolbar=$("<div>").addClass(classes_toolbar).insertBefore($anchor)),this.$toolbar=$toolbar,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},Table.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var tableId=this.$table.attr("id");$(document).off("."+tableId),$(window).off("."+tableId),this.$table.trigger(events.destroy,[this]),this.$table.removeData("tablesaw")},$.fn.tablesaw=function(){return this.each(function(){$(this).data("tablesaw")||new Table(this)})};var $doc=$(document);$doc.on("enhance.tablesaw",function(e){Tablesaw.mustard&&$(e.target).find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]").tablesaw()});var scrollTimeout,resizeTimeout,isScrolling=!1;$doc.on("scroll.tablesaw",function(){isScrolling=!0,window.clearTimeout(scrollTimeout),scrollTimeout=window.setTimeout(function(){isScrolling=!1},300)}),$(window).on("resize",function(){isScrolling||(window.clearTimeout(resizeTimeout),resizeTimeout=window.setTimeout(function(){$doc.trigger(events.resize)},150))}),Tablesaw.Table=Table}(),classes_cellLabels="tablesaw-cell-label",classes_cellContentLabels="tablesaw-cell-content",data_key=classes_stackTable="tablesaw-stack",attrs_labelless="data-tablesaw-no-labels",attrs_hideempty="data-tablesaw-hide-empty",(Stack=function(element,tablesaw){this.tablesaw=tablesaw,this.$table=$(element),this.labelless=this.$table.is("["+attrs_labelless+"]"),this.hideempty=this.$table.is("["+attrs_hideempty+"]"),this.$table.data(data_key,this)}).prototype.init=function(){if(this.$table.addClass(classes_stackTable),!this.labelless){var self=this;this.$table.find("th, td").filter(function(){return!$(this).closest("thead").length}).filter(function(){return!($(this).closest("tr").is("["+attrs_labelless+"]")||self.hideempty&&!$(this).html())}).each(function(){var $newHeader=$(document.createElement("b")).addClass(classes_cellLabels),$cell=$(this);$(self.tablesaw._findPrimaryHeadersForCell(this)).each(function(index){var $header=$(this.cloneNode(!0)),$sortableButton=$header.find(".tablesaw-sortable-btn");$header.find(".tablesaw-sortable-arrow").remove();var $checkall=$header.find("[data-tablesaw-checkall]");if($checkall.closest("label").remove(),$checkall.length)$newHeader=$([]);else{0<index&&$newHeader.append(document.createTextNode(", "));for(var el,parentNode=$sortableButton.length?$sortableButton[0]:$header[0];el=parentNode.firstChild;)$newHeader[0].appendChild(el)}}),$newHeader.length&&!$cell.find("."+classes_cellContentLabels).length&&$cell.wrapInner("<span class='"+classes_cellContentLabels+"'></span>");var $label=$cell.find("."+classes_cellLabels);$label.length?$label.replaceWith($newHeader):$cell.prepend($newHeader)})}},Stack.prototype.destroy=function(){this.$table.removeClass(classes_stackTable),this.$table.find("."+classes_cellLabels).remove(),this.$table.find("."+classes_cellContentLabels).each(function(){$(this).replaceWith(this.childNodes)})},$(document).on(Tablesaw.events.create,function(e,tablesaw){"stack"===tablesaw.mode&&new Stack(tablesaw.table,tablesaw).init()}).on(Tablesaw.events.refresh,function(e,tablesaw){"stack"===tablesaw.mode&&$(tablesaw.table).data(data_key).init()}).on(Tablesaw.events.destroy,function(e,tablesaw){"stack"===tablesaw.mode&&$(tablesaw.table).data(data_key).destroy()}),Tablesaw.Stack=Stack,methods={_create:function(){return $(this).each(function(){$(this).trigger("beforecreate.tablesawbtn").tablesawbtn("_init").trigger("create.tablesawbtn")})},_init:function(){var oEl=$(this),sel=this.getElementsByTagName("select")[0];return sel&&$(this).addClass("btn-select tablesaw-btn-select").tablesawbtn("_select",sel),oEl},_select:function(sel){var update=function(oEl,sel){var el,children,opts=$(sel).find("option"),label=document.createElement("span"),found=!1;if(label.setAttribute("aria-hidden","true"),label.innerHTML="&#160;",opts.each(function(){this.selected&&(label.innerHTML=this.text)}),children=oEl.childNodes,0<opts.length){for(var i=0,l=children.length;i<l;i++)(el=children[i])&&"SPAN"===el.nodeName.toUpperCase()&&(oEl.replaceChild(label,el),found=!0);found||oEl.insertBefore(label,oEl.firstChild)}};update(this,sel),$(this).on("change refresh",function(){update(this,sel)})}},$.fn.tablesawbtn=function(arrg,a,b,c){return this.each(function(){return arrg&&"string"==typeof arrg?$.fn.tablesawbtn.prototype[arrg].call(this,a,b,c):$(this).data("tablesawbtnactive")?$(this):($(this).data("tablesawbtnactive",!0),void $.fn.tablesawbtn.prototype._create.call(this))})},$.extend($.fn.tablesawbtn.prototype,methods),function(){var data_key="tablesaw-coltoggle",ColumnToggle=function(element){this.$table=$(element),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={btnTarget:"data-tablesaw-columntoggle-btn-target",set:"data-tablesaw-columntoggle-set"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-"},this.set=[],this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(data_key,this))};ColumnToggle.prototype.initSet=function(){var set=this.$table.attr(this.attributes.set);if(set){var table=this.$table[0];this.set=$("table["+this.attributes.set+"='"+set+"']").filter(function(){return this!==table}).get()}},ColumnToggle.prototype.init=function(){if(this.$table.length){var tableId,id,$menuButton,$popup,$menu,$btnContain,self=this,cfg=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(text){return"<label><input type='checkbox' checked>"+text+"</label>"}});this.$table.addClass(this.classes.columnToggleTable),id=(tableId=this.$table.attr("id"))+"-popup",$btnContain=$("<div class='"+this.classes.columnBtnContain+"'></div>"),$menuButton=$("<a href='#"+id+"' class='btn tablesaw-btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+Tablesaw.i18n.columnToggleButton+"</span></a>"),$popup=$("<div class='"+this.classes.popup+"' id='"+id+"'></div>"),$menu=$("<div class='btn-group'></div>"),this.$popup=$popup;var hasNonPersistentHeaders=!1;this.$headers.each(function(){var $this=$(this),priority=$this.attr("data-tablesaw-priority"),$cells=self.tablesaw._$getCells(this);priority&&"persist"!==priority&&($cells.addClass(self.classes.priorityPrefix+priority),$(cfg.getColumnToggleLabelTemplate($this.text())).appendTo($menu).find('input[type="checkbox"]').data("tablesaw-header",this),hasNonPersistentHeaders=!0)}),hasNonPersistentHeaders||$menu.append("<label>"+Tablesaw.i18n.columnToggleError+"</label>"),$menu.appendTo($popup),$menu.find('input[type="checkbox"]').on("change",function(e){var index;(onToggleCheckboxChange(e.target),self.set.length)&&($(self.$popup).find("input[type='checkbox']").each(function(j){if(this===e.target)return index=j,!1}),$(self.set).each(function(){var checkbox=$(this).data(data_key).$popup.find("input[type='checkbox']").get(index);checkbox&&(checkbox.checked=e.target.checked,onToggleCheckboxChange(checkbox))}))}),$menuButton.appendTo($btnContain);var closeTimeout,$btnTarget=$(this.$table.attr(this.attributes.btnTarget));$btnContain.appendTo($btnTarget.length?$btnTarget:this.tablesaw.$toolbar),$menuButton.on("click.tablesaw",function(event){event.preventDefault(),$btnContain.is(".visible")?closePopup():($btnContain.addClass("visible"),$menuButton.removeClass("down").addClass("up"),$(document).off("click."+tableId,closePopup),window.clearTimeout(closeTimeout),closeTimeout=window.setTimeout(function(){$(document).on("click."+tableId,closePopup)},15))}),$popup.appendTo($btnContain),this.$menu=$menu;var timeout,$overflow=this.$table.closest(".tablesaw-overflow");if($overflow.css("-webkit-overflow-scrolling"))$overflow.on("scroll",function(){var $div=$(this);window.clearTimeout(timeout),timeout=window.setTimeout(function(){$div.css("-webkit-overflow-scrolling","auto"),window.setTimeout(function(){$div.css("-webkit-overflow-scrolling","touch")},0)},100)});$(window).on(Tablesaw.events.resize+"."+tableId,function(){self.refreshToggle()}),this.initSet(),this.refreshToggle()}function onToggleCheckboxChange(checkbox){var checked=checkbox.checked,header=self.getHeaderFromCheckbox(checkbox),$cells=self.tablesaw._$getCells(header);$cells[checked?"removeClass":"addClass"]("tablesaw-toggle-cellhidden"),$cells[checked?"addClass":"removeClass"]("tablesaw-toggle-cellvisible"),self.updateColspanCells(header,checked),self.$table.trigger("tablesawcolumns")}function closePopup(event){event&&$(event.target).closest("."+self.classes.popup).length||($(document).off("click."+tableId),$menuButton.removeClass("up").addClass("down"),$btnContain.removeClass("visible"))}},ColumnToggle.prototype.getHeaderFromCheckbox=function(checkbox){return $(checkbox).data("tablesaw-header")},ColumnToggle.prototype.refreshToggle=function(){var self=this;this.$menu.find("input").each(function(){var header=self.getHeaderFromCheckbox(this);this.checked="table-cell"===self.tablesaw._$getCells(header).eq(0).css("display")}),this.updateColspanCells()},ColumnToggle.prototype.updateColspanCells=function(header,userAction){this.tablesaw.updateColspanCells("tablesaw-toggle-cellhidden",header,userAction)},ColumnToggle.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){$(this).removeClass("tablesaw-toggle-cellhidden").removeClass("tablesaw-toggle-cellvisible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},$(document).on(Tablesaw.events.create,function(e,tablesaw){"columntoggle"===tablesaw.mode&&new ColumnToggle(tablesaw.table).init()}),$(document).on(Tablesaw.events.destroy,function(e,tablesaw){"columntoggle"===tablesaw.mode&&$(tablesaw.table).data(data_key).destroy()}),$(document).on(Tablesaw.events.refresh,function(e,tablesaw){"columntoggle"===tablesaw.mode&&$(tablesaw.table).data(data_key).refreshPriority()}),Tablesaw.ColumnToggle=ColumnToggle}(),function(){function getSortValue(cell){var text=[];return $(cell.childNodes).each(function(){var $el=$(this);$el.is("input, select")?text.push($el.val()):$el.is(".tablesaw-cell-label")||text.push(($el.text()||"").replace(/^\s+|\s+$/g,""))}),text.join("")}var pluginName="tablesaw-sortable",attrs_sortCol="data-tablesaw-sortable-col",attrs_defaultCol="data-tablesaw-sortable-default-col",attrs_numericCol="data-tablesaw-sortable-numeric",attrs_subRow="data-tablesaw-subrow",attrs_ignoreRow="data-tablesaw-ignorerow",classes={head:pluginName+"-head",ascend:pluginName+"-ascending",descend:pluginName+"-descending",switcher:pluginName+"-switch",tableToolbar:"tablesaw-bar-section",sortButton:pluginName+"-btn"},methods={_create:function(o){return $(this).each(function(){if($(this).data(pluginName+"-init"))return!1;$(this).data(pluginName+"-init",!0).trigger("beforecreate."+pluginName)[pluginName]("_init",o).trigger("create."+pluginName)})},_init:function(){var heads,$switcher,h,el=$(this),tblsaw=el.data("tablesaw");function clearOthers(headcells){$.each(headcells,function(i,v){var col=$(v);col.removeAttr(attrs_defaultCol),col.removeClass(classes.ascend),col.removeClass(classes.descend)})}el.addClass(pluginName),heads=el.children().filter("thead").find("th["+attrs_sortCol+"]"),h=heads,$.each(h,function(i,v){$(v).addClass(classes.head)}),function(h,fn){$.each(h,function(i,col){var b=$("<button class='"+classes.sortButton+"'/>");b.on("click",{col:col},fn),$(col).wrapInner(b).find("button").append("<span class='tablesaw-sortable-arrow'>")})}(heads,function(e){if(!$(e.target).is("a[href]")){e.stopPropagation();var headCell=$(e.target).closest("["+attrs_sortCol+"]"),v=e.data.col,newSortValue=heads.index(headCell[0]);clearOthers(headCell.closest("thead").find("th").filter(function(){return this!==headCell[0]})),headCell.is("."+classes.ascend)||!headCell.is("."+classes.descend)?(el[pluginName]("sortBy",v),newSortValue+="_desc"):(el[pluginName]("sortBy",v,!0),newSortValue+="_asc"),$switcher&&$switcher.find("select").val(newSortValue).trigger("refresh"),e.preventDefault()}}),function(heads){$.each(heads,function(idx,el){var $el=$(el);$el.is("["+attrs_defaultCol+"]")&&($el.is("."+classes.descend)||$el.addClass(classes.ascend))})}(heads),el.is("[data-tablesaw-sortable-switch]")&&function(heads){$switcher=$("<div>").addClass(classes.switcher).addClass(classes.tableToolbar);var html=["<label>"+Tablesaw.i18n.sort+":"];html.push('<span class="btn tablesaw-btn"><select>'),heads.each(function(j){var $t=$(this),isDefaultCol=$t.is("["+attrs_defaultCol+"]"),isDescending=$t.is("."+classes.descend),hasNumericAttribute=$t.is("["+attrs_numericCol+"]"),numericCount=0;$(this.cells.slice(0,5)).each(function(){isNaN(parseInt(getSortValue(this),10))||numericCount++});var isNumeric=5===numericCount;hasNumericAttribute||$t.attr(attrs_numericCol,isNumeric?"":"false"),html.push("<option"+(isDefaultCol&&!isDescending?" selected":"")+' value="'+j+'_asc">'+$t.text()+" "+(isNumeric?"&#x2191;":"(A-Z)")+"</option>"),html.push("<option"+(isDefaultCol&&isDescending?" selected":"")+' value="'+j+'_desc">'+$t.text()+" "+(isNumeric?"&#x2193;":"(Z-A)")+"</option>")}),html.push("</select></span></label>"),$switcher.html(html.join(""));var $firstChild=tblsaw.$toolbar.children().eq(0);$firstChild.length?$switcher.insertBefore($firstChild):$switcher.appendTo(tblsaw.$toolbar),$switcher.find(".tablesaw-btn").tablesawbtn(),$switcher.find("select").on("change",function(){var val=$(this).val().split("_"),head=heads.eq(val[0]);clearOthers(head.siblings()),el[pluginName]("sortBy",head.get(0),"asc"===val[1])})}(heads)},sortRows:function(rows,colNum,ascending,col,tbody){var fn,cells=function(cellArr,belongingToTbody){var cells=[];return $.each(cellArr,function(i,cell){for(var row=cell.parentNode,$row=$(row),subrows=[],$next=$row.next();$next.is("["+attrs_subRow+"]");)subrows.push($next[0]),$next=$next.next();var tbody=row.parentNode;$row.is("["+attrs_subRow+"]")||tbody===belongingToTbody&&cells.push({element:cell,cell:getSortValue(cell),row:row,subrows:subrows.length?subrows:null,ignored:$row.is("["+attrs_ignoreRow+"]")})}),cells}(col.cells,tbody),customFn=$(col).data("tablesaw-sort");return fn=!(!customFn||"function"!=typeof customFn)&&customFn(ascending)||function(ascending,forceNumeric){var regex=/[^\-\+\d\.]/g;return ascending?function(a,b){return a.ignored||b.ignored?0:forceNumeric?parseFloat(a.cell.replace(regex,""))-parseFloat(b.cell.replace(regex,"")):a.cell.toLowerCase()>b.cell.toLowerCase()?1:-1}:function(a,b){return a.ignored||b.ignored?0:forceNumeric?parseFloat(b.cell.replace(regex,""))-parseFloat(a.cell.replace(regex,"")):a.cell.toLowerCase()<b.cell.toLowerCase()?1:-1}}(ascending,$(col).is("["+attrs_numericCol+"]")&&!$(col).is("["+attrs_numericCol+'="false"]')),function(sorted){var i,l,newRows=[];for(i=0,l=sorted.length;i<l;i++)newRows.push(sorted[i].row),sorted[i].subrows&&newRows.push(sorted[i].subrows);return newRows}(cells.sort(fn))},makeColDefault:function(col,a){var c=$(col);c.attr(attrs_defaultCol,"true"),a?(c.removeClass(classes.descend),c.addClass(classes.ascend)):(c.removeClass(classes.ascend),c.addClass(classes.descend))},sortBy:function(col,ascending){var colNum,el=$(this),tbl=el.data("tablesaw");tbl.$tbody.each(function(){var sortedRows,j,k,$tbody=$(this),rows=tbl.getBodyRows(this),map=tbl.headerMapping[0];for(j=0,k=map.length;j<k;j++)if(map[j]===col){colNum=j;break}for(j=0,k=(sortedRows=el[pluginName]("sortRows",rows,colNum,ascending,col,this)).length;j<k;j++)$tbody.append(sortedRows[j])}),el[pluginName]("makeColDefault",col,ascending),el.trigger("tablesaw-sorted")}};$.fn[pluginName]=function(arrg){var returnVal,args=Array.prototype.slice.call(arguments,1);return arrg&&"string"==typeof arrg?void 0!==(returnVal=$.fn[pluginName].prototype[arrg].apply(this[0],args))?returnVal:$(this):($(this).data(pluginName+"-active")||($(this).data(pluginName+"-active",!0),$.fn[pluginName].prototype._create.call(this,arrg)),$(this))},$.extend($.fn[pluginName].prototype,methods),$(document).on(Tablesaw.events.create,function(e,Tablesaw){Tablesaw.$table.is("table[data-tablesaw-sortable]")&&Tablesaw.$table[pluginName]()})}(),function(){var classes_hideBtn="disabled",classes_persistWidths="tablesaw-fix-persist",classes_hiddenCol="tablesaw-swipe-cellhidden",classes_persistCol="tablesaw-swipe-cellpersist",classes_allColumnsVisible="tablesaw-all-cols-visible",attrs_disableTouchEvents="data-tablesaw-no-touch";function createSwipeTable(tbl,$table){var tblsaw=$table.data("tablesaw"),$btns=$("<div class='tablesaw-advance'></div>"),$prevBtn=$("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left'>"+Tablesaw.i18n.swipePreviousColumn+"</a>").appendTo($btns),$nextBtn=$("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right'>"+Tablesaw.i18n.swipeNextColumn+"</a>").appendTo($btns),$headerCells=tbl._getPrimaryHeaderCells(),$headerCellsNoPersist=$headerCells.not('[data-tablesaw-priority="persist"]'),headerWidths=[],$head=$(document.head||"head"),tableId=$table.attr("id");if(!$headerCells.length)throw new Error("tablesaw swipe: no header cells found.");function initMinHeaderWidths(){$table.css({width:"1px"}),$table.find("."+classes_hiddenCol).removeClass(classes_hiddenCol),headerWidths=[],$headerCells.each(function(){headerWidths.push(this.offsetWidth)}),$table.css({width:""})}function showColumn(headerCell){tblsaw._$getCells(headerCell).removeClass(classes_hiddenCol)}function hideColumn(headerCell){tblsaw._$getCells(headerCell).addClass(classes_hiddenCol)}function unmaintainWidths(){$table.removeClass(classes_persistWidths),$("#"+tableId+"-persist").remove()}function maintainWidths(){var newHash,prefix="#"+tableId+".tablesaw-swipe ",styles=[],tableWidth=$table.width(),hash=[];if($headerCells.each(function(index){var width;$(this).is('[data-tablesaw-priority="persist"]')&&(width=this.offsetWidth)<.75*tableWidth&&(hash.push(index+"-"+width),styles.push(prefix+" ."+classes_persistCol+":nth-child("+(index+1)+") { width: "+width+"px; }"))}),newHash=hash.join("_"),styles.length){$table.addClass(classes_persistWidths);var $style=$("#"+tableId+"-persist");$style.length&&$style.data("tablesaw-hash")===newHash||($style.remove(),$("<style>"+styles.join("\n")+"</style>").attr("id",tableId+"-persist").data("tablesaw-hash",newHash).appendTo($head))}}function getNext(){var checkFound,next=[];return $headerCellsNoPersist.each(function(i){var $t=$(this),isHidden="none"===$t.css("display")||$t.is("."+classes_hiddenCol);if(isHidden||checkFound){if(isHidden&&checkFound)return next[1]=i,!1}else checkFound=!0,next[0]=i}),next}function getPrev(){var next=getNext();return[next[1]-1,next[0]-1]}function canAdvance(pair){return-1<pair[1]&&pair[1]<$headerCellsNoPersist.length}function fakeBreakpoints(){if(!(matchMedia=$table.attr("data-tablesaw-swipe-media"))||"matchMedia"in window&&window.matchMedia(matchMedia).matches){var matchMedia,containerWidth=$table.parent().width(),persist=[],sum=0,sums=[],visibleNonPersistantCount=$headerCells.length;$headerCells.each(function(index){var isPersist=$(this).is('[data-tablesaw-priority="persist"]');persist.push(isPersist),sum+=headerWidths[index],sums.push(sum),(isPersist||containerWidth<sum)&&visibleNonPersistantCount--});var needsNonPersistentColumn=0===visibleNonPersistantCount;$headerCells.each(function(index){sums[index]>containerWidth&&hideColumn(this)}),$headerCells.each(function(index){if(persist[index])return headerCell=this,void tblsaw._$getCells(headerCell).addClass(classes_persistCol);var headerCell;(sums[index]<=containerWidth||needsNonPersistentColumn)&&(needsNonPersistentColumn=!1,showColumn(this),tblsaw.updateColspanCells(classes_hiddenCol,this,!0))}),unmaintainWidths(),$table.trigger("tablesawcolumns")}}function advance(fwd){var pair=function(fwd){return fwd?getNext():getPrev()}(fwd);canAdvance(pair)&&(isNaN(pair[0])&&(pair[0]=fwd?0:$headerCellsNoPersist.length-1),maintainWidths(),hideColumn($headerCellsNoPersist.get(pair[0])),tblsaw.updateColspanCells(classes_hiddenCol,$headerCellsNoPersist.get(pair[0]),!1),showColumn($headerCellsNoPersist.get(pair[1])),tblsaw.updateColspanCells(classes_hiddenCol,$headerCellsNoPersist.get(pair[1]),!0),$table.trigger("tablesawcolumns"))}function getCoord(event,key){return(event.touches||event.originalEvent.touches)[0][key]}$table.addClass("tablesaw-swipe"),initMinHeaderWidths(),$btns.appendTo(tblsaw.$toolbar),tableId||(tableId="tableswipe-"+Math.round(1e4*Math.random()),$table.attr("id",tableId)),$prevBtn.add($nextBtn).on("click",function(e){advance(!!$(e.target).closest($nextBtn).length),e.preventDefault()}),$table.is("["+attrs_disableTouchEvents+"]")||$table.on("touchstart.swipetoggle",function(e){var x,y,originX=getCoord(e,"pageX"),originY=getCoord(e,"pageY"),scrollTop=window.pageYOffset;$(window).off(Tablesaw.events.resize,fakeBreakpoints),$(this).on("touchmove.swipetoggle",function(e){x=getCoord(e,"pageX"),y=getCoord(e,"pageY")}).on("touchend.swipetoggle",function(){var cfg=tbl.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),verticalThreshold=cfg.swipe?cfg.swipe.verticalThreshold:cfg.swipeVerticalThreshold,horizontalThreshold=cfg.swipe?cfg.swipe.horizontalThreshold:cfg.swipeHorizontalThreshold,isPageScrolled=Math.abs(window.pageYOffset-scrollTop)>=verticalThreshold;Math.abs(y-originY)>=verticalThreshold||isPageScrolled||(x-originX<-1*horizontalThreshold&&advance(!0),horizontalThreshold<x-originX&&advance(!1)),window.setTimeout(function(){$(window).on(Tablesaw.events.resize,fakeBreakpoints)},300),$(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),$table.on("tablesawcolumns.swipetoggle",function(){var canGoPrev=canAdvance(getPrev()),canGoNext=canAdvance(getNext());$prevBtn[canGoPrev?"removeClass":"addClass"](classes_hideBtn),$nextBtn[canGoNext?"removeClass":"addClass"](classes_hideBtn),tblsaw.$toolbar[canGoPrev||canGoNext?"removeClass":"addClass"](classes_allColumnsVisible)}).on("tablesawnext.swipetoggle",function(){advance(!0)}).on("tablesawprev.swipetoggle",function(){advance(!1)}).on(Tablesaw.events.destroy+".swipetoggle",function(){var $t=$(this);$t.removeClass("tablesaw-swipe"),tblsaw.$toolbar.find(".tablesaw-advance").remove(),$(window).off(Tablesaw.events.resize,fakeBreakpoints),$t.off(".swipetoggle")}).on(Tablesaw.events.refresh,function(){unmaintainWidths(),initMinHeaderWidths(),fakeBreakpoints()}),fakeBreakpoints(),$(window).on(Tablesaw.events.resize,fakeBreakpoints)}$(document).on(Tablesaw.events.create,function(e,tablesaw){"swipe"===tablesaw.mode&&createSwipeTable(tablesaw,tablesaw.$table)})}(),MiniMap={attr:{init:"data-tablesaw-minimap"},show:function(table){var mq=table.getAttribute(MiniMap.attr.init);return""===mq||!!(mq&&"matchMedia"in window)&&window.matchMedia(mq).matches}},$(document).on(Tablesaw.events.create,function(e,tablesaw){"swipe"!==tablesaw.mode&&"columntoggle"!==tablesaw.mode||!tablesaw.$table.is("[ "+MiniMap.attr.init+"]")||function($table){var tblsaw=$table.data("tablesaw"),$btns=$('<div class="tablesaw-advance minimap">'),$dotNav=$('<ul class="tablesaw-advance-dots">').appendTo($btns),hideDot="tablesaw-advance-dots-hide";function showHideNav(){if(MiniMap.show($table[0])){$btns.css("display","block");var dots=$dotNav.find("li").removeClass(hideDot);$table.find("thead th").each(function(i){"none"===$(this).css("display")&&dots.eq(i).addClass(hideDot)})}else $btns.css("display","none")}$table.data("tablesaw")._getPrimaryHeaderCells().each(function(){$dotNav.append("<li><i></i></li>")}),$btns.appendTo(tblsaw.$toolbar),showHideNav(),$(window).on(Tablesaw.events.resize,showHideNav),$table.on("tablesawcolumns.minimap",function(){showHideNav()}).on(Tablesaw.events.destroy+".minimap",function(){var $t=$(this);tblsaw.$toolbar.find(".tablesaw-advance").remove(),$(window).off(Tablesaw.events.resize,showHideNav),$t.off(".minimap")})}(tablesaw.$table)}),Tablesaw.MiniMap=MiniMap,S={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-bar-section"},modes:["stack","swipe","columntoggle"],init:function(table){var isSelected,$table=$(table),tblsaw=$table.data("tablesaw"),ignoreMode=$table.attr(S.attributes.excludeMode),$toolbar=tblsaw.$toolbar,$switcher=$("<div>").addClass(S.classes.main+" "+S.classes.toolbar),html=['<label><span class="abbreviated">'+Tablesaw.i18n.modeSwitchColumnsAbbreviated+'</span><span class="longform">'+Tablesaw.i18n.modeSwitchColumns+"</span>:"],dataMode=$table.attr("data-tablesaw-mode");html.push('<span class="btn tablesaw-btn"><select>');for(var j=0,k=S.modes.length;j<k;j++)ignoreMode&&ignoreMode.toLowerCase()===S.modes[j]||(isSelected=dataMode===S.modes[j],html.push("<option"+(isSelected?" selected":"")+' value="'+S.modes[j]+'">'+Tablesaw.i18n.modes[j]+"</option>"));html.push("</select></span></label>"),$switcher.html(html.join(""));var $otherToolbarItems=$toolbar.find(".tablesaw-advance").eq(0);$otherToolbarItems.length?$switcher.insertBefore($otherToolbarItems):$switcher.appendTo($toolbar),$switcher.find(".tablesaw-btn").tablesawbtn(),$switcher.find("select").on("change",function(event){return S.onModeChange.call(table,event,$(this).val())})},onModeChange:function(event,val){var $table=$(this),tblsaw=$table.data("tablesaw");tblsaw.$toolbar.find("."+S.classes.main).remove(),tblsaw.destroy(),$table.attr("data-tablesaw-mode",val),$table.tablesaw()}},$(document).on(Tablesaw.events.create,function(e,Tablesaw){Tablesaw.$table.is(S.selectors.init)&&S.init(Tablesaw.table)}),function(){var pluginName="tablesawCheckAll";function CheckAll(tablesaw){this.tablesaw=tablesaw,this.$table=tablesaw.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,this.$table.data(pluginName)||(this.$table.data(pluginName,this),this.init())}CheckAll.prototype._filterCells=function($checkboxes){return $checkboxes.filter(function(){return!$(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)},CheckAll.prototype.getCheckboxesForButton=function(button){return this._filterCells($($(button).attr(this.attr)))},CheckAll.prototype.getCheckboxesForCheckbox=function(checkbox){return this._filterCells($($(checkbox).closest("th")[0].cells))},CheckAll.prototype.init=function(){var self=this;this.$table.find(this.checkAllSelector).each(function(){$(this).is(self.checkboxSelector)?self.addCheckboxEvents(this):self.addButtonEvents(this)})},CheckAll.prototype.addButtonEvents=function(trigger){var self=this;$(trigger).on("click",function(event){event.preventDefault();var setChecked,$checkboxes=self.getCheckboxesForButton(this),allChecked=!0;$checkboxes.each(function(){this.checked||(allChecked=!1)}),setChecked=!!$(this).is(self.forceCheckedSelector)||!$(this).is(self.forceUncheckedSelector)&&!allChecked,$checkboxes.each(function(){this.checked=setChecked,$(this).trigger("change."+pluginName)})})},CheckAll.prototype.addCheckboxEvents=function(trigger){var self=this;$(trigger).on("change",function(){var setChecked=this.checked;self.getCheckboxesForCheckbox(this).each(function(){this.checked=setChecked})});var $checkboxes=self.getCheckboxesForCheckbox(trigger);$checkboxes.on("change."+pluginName,function(){var checkedCount=0;$checkboxes.each(function(){this.checked&&checkedCount++});var allSelected=checkedCount===$checkboxes.length;trigger.checked=allSelected,trigger.indeterminate=0!==checkedCount&&!allSelected})},$(document).on(Tablesaw.events.create,function(e,tablesaw){new CheckAll(tablesaw)}),Tablesaw.CheckAll=CheckAll}(),Tablesaw});